sudo: required
services:
- docker
env:
  global:
  - secure: uO7+agZnP1F+YxT3I3J6YLkxfshqVXnskh8eakDcqJPFn/j+x6iWANAMh8OfSAEps98YTPQdN+pxv/kcqVMIy2Ov3UBlThD4BYUh6weRuD6AUxJKAqp40HORSIY7V4gPRVQzvft6dTZ7HTHYrA4SYdW0BliBg5g2LNhWDzadoPXLTbX9g0eO5booccD5IOjTN5kcJC1RYByb0wnrr602QgMJbULekThneQWPQIaSlbEoBdIk7SfmUSCsmsqZDo39vB3Nl1Ofm9isdmeOrJKdLlSKvop+kwI6/hdyjMQgp/jmIU3p8OoJhzHfe3ms8oaRNYWQ1PZJWNG4HRQPb/b/tLJ3fbAJR9h5EP4k1CqsVleNsJpH9XQialsFuo0K9yLf7QBY/y5j7QCz0xewl73gspQxDquc2zFa4XPq5FWkCJYSb4c6XxxSdeq62dLnDP2dP4rnK56jIsplI77Sgfu4+26LIm4xx513XLzUVbGC4JLjTqA/0zmsjyzvlv9x7EqWFkG6I/g3kt4J23LNeqs4XM0Bjms4UOH7xEwCToFVoPW77o+EnmHRL0FO0gSYm6b9IB54rdKMA5ktQOvhFxtt9arJAi18xlig0A3mRW+gKtNQLL6KpoOrbrRrzo1mgppiX08YTFLBBda//Wq5p7KEHrNMmdJlnkDl/7dc/5/1DHU=
  - secure: RZkI87GXm813IYH2D8MnC+D5pSjb3RLf9Md+EyU7vuP3XUcqacZ2mujXj19TrGg2CVMTBhW4GmhRpfmUOCS1Cma6iEyx2/9UTKM7tjCyXXs5otvPQOUsVWmG9a5KYtPtRQJexbpfL3m8qf2HeLpiQdCU71PM5SZfGnKW0ZxfmR872TuTNDxrwI0nvWiOZLyIom1gyooUBcGnnmGRpIK7Vg5D7ZQtTwoYL+XbAfFzt/SmK2yS/jIshy9ulpnLbpT1xaJEyg8hLxovKtJJUcZCUjAHRL8NRtamEHQHzCU+of7mudJNbMxXt4T3g7HcozY1zP1c/z+dtEkw6h2vNpYswl1A2N9izwed6iegMJbq4FhPboywZA8Zd5mBwuMQGqw08gLbv2h+fiUjO0sDXKApRaQoj42GxDc1HV7CYqEYILqnJrNipjC9LR1eIyGzht8c2pPOb3X1EyCje8DvDMMCAZf1oHyW12RYeyAbad/i8ceOzfLm4KI5Y0eUgGnBzjhunHxLBqYjHzKA3E+oM/7RLFzjQXrbVkij3D0oEWLhLdMVQUQ3ElxQTKI+XLO3ZPgqSeOpB+JFrLxFPE9y11JgYZSoqTdS5ibc/fdsGaI1q4X+CXhzbmx6SFRDCllHOK26SpntOCunAm9F4vKnJEY1gQu1d+XWtgxLXjgrM8v9mcU=
  - secure: Dc53WKBJbppHK2Z4mSe8iuXHjknmgd2rjNIkBSp+ScgVP8MnY4O6j+DCeDueMhKc09CtDrCpGHB3sdpR5E/UA8XS0wxb/rSecuhGT/FNYXJwz/bgBm9g9a7VsmrLBVm6f68OkOtl09ZlXqQIVKOffmkFrBY0zsqI/y9XMawjJFpk0zukyQJ9DUJ1cHZk2IGIqY4otACiFbdfCjogZhGrc+3v9P/w4tkeX+2gC/lA+A9jMxwLbGpXXqovZQQPGtjrldXapWf5ESN6IkrM5fJdjYVpgTKypy3fT+KeE1KERwqoGNpVBANMvjldPJqMxN80tRNIUNoL8DDmHPS9x+8md3HqjQCwPPdeAgRERRFdxsbxG4WPZ1azcVnGrvyJMAJsDpWcJhfH4ynw6mDJ1GdKLXL69aXGqfA5tPvF+JDElv0qLqiLoj3616W6FHCwpCF1CKgln+GikbAczDOxb8R25YlbyE7w00dWy3Y8EdXgjzg/xENykowzI4Qto9Ohb9JAj2lsL+ThAAs67kFVTZjZmULC1e+QJU+f3PfM3wiLvHh9PqDwGogiAMps1Z8OjspAAWjjYrGboXE2qzl13qhQAHjRm0WZCrWIhW8V6VB3ak7ZjGYR1FVzpcrhsoPwNVsprNgZwmpx+ICR6WlJyJYFonGJTXR8zpIordqr4g9hm8w=
  - secure: Joukkb0rOhPAzrt0kdOBS8JTGi4SOnY7fUw2HVEoPbjbzdLY0A34FOos486b/fyel9Q/gCuqXzIdN407C2D7tVVTaTzPyJtmHdxMbfDP6SYpnLJvoVfjM8ArRvfGPOOgMvZFK0zRm2z8NLKUt7Ix7m4YzzrqiID2l58pssQEBzguvgg0FFUptA6xRKhkdrJHfUDs0hCHFf4nO/aYP1UYeNldKpJWlGHg8n1LB881y++5NwrcqBHVZuGF6bGxqWgxbt2MWPN42BvvTmnM/7ksy3pCov/rHPiwDhU3xU4PQAQ7J/ZpDZgQ10RmLevLwPc9bJ/fLAbldXw6pWS+ubs2AtrXxmamJpBtpMlnVbbJFxGgI/UkmAC1JclwkHgFfOsDtIoVopNm+TH7DPHLThLo1rl+dG7oYI/E9HOLFpMeEPZsSBccevGcjrh6OSYtQAvy4+371KonceyPBjQ9PvKJXfi207Rs7Gz+JXZGqNJZGTZHh39o3taIB3QvLwrWn5/ejWNBNux6QgLatuIrWel885tzNFnmP4NQPSohZI/UO1r30YS+miMxm0jOE4jwSKuS951Kt1VkGyqEU3JHlkr2g57otYJH/znKojpwTS54MI3yqvJjghlyRExecnF4C1WZ1NHsHyxHqSvfXkG44PVK/NH5SJRNoEs905TIkwTzadw=
  - secure: KdkVdiqiuwh4aigSWINyBBSMJjq5C8ksNsGcyKZ2emrFuYiOi62ibRBrJ6vth6M4xf7gpiTk6K4Q1QRmroDywoPysLlWMCKUDCoyYgMG4OMH1eQD3KTJINTFF1jGYPq5p8XqrL6zAta4xGv84jnAMxvHTLN/WFqtpYiAB4or/9JwYV1JyCxrtak3aL7LAiqsfD4V9mY+dTvpgAXyU2qGu1YkIExmiFOyFOPIKIfK8Hb8Rd0O2pKE8kdcaHiaeGI5vvgEbgE7HfF3/xtf05B+EKX6B9+h6rNzaLu4/YmWrF5S0mWTszeekv4d/JUqeKviPiRm3tK5RamIDFhFKRgv3lEzhp57p47IyO20p05Gka2pC+v1ZcjPKxbQcW318bR0pLKItBewkvMS27adV1w0hA2XCTZvSkDhfk3dg3LuApOMtWjgIhrKDqs7UngM3U2477ONw0vvj33SthLojjmobuvnxzsq2L1jV7k3GB+NfB8fuMAM3B6lpkFkbvSQB1MjPtCe+sXzjyhxGWewPkEK/+u4+Yo1qxDSPsHNu5s04Kk4tIXPBw1GQiwCkqVjoccrv+NIG7UdVpH5t3c4NU8lNr2UswN62YtJ6WhQIo8IlTxVcPxorUUicGisYQod8sb4YeMNdSQZFdodDOIFjv7oNAnT2SomWYL+FE2dGrERl3I=
  - secure: xfsn1lqcITOMWB70pBDfzEHworlb10P0zOcpmBeVXr+rzoS1g2SW+i6h7D9Lo4VHAaMH3A2tpPoiEyvIKngM/hQOxIf89WZa2TY6svAl8cFot1/xFt5kLIJzsKBa5EVZ1MqRnpFjHP+HPuQUal4+wJQpizkhkTPlm8hYvTizB7l1PFY+AhD2YQ45VtCl2s4g1St4L2aNOHHcsOdqwWTD47eKtiZEJ3siej4vSnOUH1R1RDZxVMoRUgoQlfRgOkWt2U5N7EL1aEwmcviJleF08hA6uA3BjBJSdHI5wuOrWlQHB8d0JoM7iwVHCaQLxJ8QMoAhu7JOQf5Amrf7EdKgddSczuf5KFUPQ4idlAYzRKfjYJXfY78E9k0173wBEUu8898WYhxDhbMjzNelN07l997EBSFReQyuMV3Ka0bQhKwNlikNVJgSbkH/APKmdD/U/f6+I6H6qlPhAsTvWSEaipCxAyc/qck+JJFXpYnjpdGUPcRokJfISvEljKjLtqwDmkwRTk8zF9U4astAfSdP9rUtmajdJZU7hG76KqbWSErDaiFBdvRuuRsu6hbFYoVDmQjjVfKdAEaqMEmkUkyCh5NcQDEMB1VKdMgSfwaikPdRSLTtVF0VAjR0Ro1tRpNSyTxTye73t5OImHB60qvNNO1luQlYL1a49VEwCCyVGbE=
  - secure: PuCxsU9DmScnIjDU5sqPjZWBXt9c649lkKGxHpc3JrLTg1UBK7PWUrj8GhiGUZ/6JNWzHeR9ka/H/vw8PQs5xwg8M/uBh+K3H8ZKlKGDJrAz80zIbJlSKleBshshZ7AWbCOU4zt1cYD83OLEShfKOd0dpr2EGMCU6fh2QoLmHPpR9UeDsE3rv3dKbcsukTP157PuyHdcgSifpR84f4VtxuNKFe+FD1JuZy+GShAols/LV9Q0lEBrarv4M75sj8T1o4BCbgKguq4Il420n4v8ugVBlnk5ufOX+Ps+zNFYE6+n9O+FeXuoAJIJBq8Qjl+qr03VUM8MyprpTxaAndhQcb8tpvuMOAyYn/2Cy/mVG3UcJwGRdV2ZkvLlBz8QLN/gOVCS97tD3aIBmmEvo3QjjnrVJc5lizSus1BP4b5ZZJmSho/cJ7tLZorZ4EjqNx/Wh60MjhZCfQSVhWZNuHvw99fTGaY/9xvp4j3YlXGWNwRycz1BmIDCyXb8On2E/Ic/IUWtn7npl0xrKzsQvE4zR0be2uknZKfo6pqte4j520MR7OKYcra/RxapehJpwHuTK4xc6nO7R7CnEocyKdY/NVATq6G2DXl1LXNMjXs7ZEkNY+zS+9h0zotrf7aOuAaiWXA0NoAlCsnMvI6hAoszXPqwIMY3gRvmg6W7yfHK4Aw=
  - secure: IdKy1M6jg91hh23vY/bAbO852Sh8SrgkErdqskxmuZaMtkAHtHZpwExLWxqQ2r0jOzcjV1812gSXxPY5Qzpt370H64t0ZT8aJknjv6avMdazBG8OhcgxVx4igbJh8njfmYGdKv9DnyMnZRiAAIwKJ/2NqbJIjdwBQpWTXdzBNsZTSrHjfmJzonnCox5obT8YFqGJvPdkybMVFo7I3oCc37u98RHIIc/8Wz3zPuoOc/cswpoA9J6NT3Vt0FYWvpkw/90zWdj0Kcr71LI+GXwYBN2Ouf3tCwUyR051L0Z3eE4Z2DwNqD8amXI0d2hCeuIUdaxMz2C74M6MPLtP3uON0WyoV5WI8aLJ+x0E4X58j3E/vp0acpkI9r/Q8TMy5Q9QQjW95ckIsMPvHQIjsHiT8FL3E3TOzv7dg6ltLUExHpUR5FVObTVh3Ge6f7IAbbI8zednxa/nD7U0+7Ck/3yZIUXazX8XMuAryI0I/O/pdQPSlGbayHcH2I2OAXezRwtfkW7aRvLCYIWtWt6EX5hSXgywcToDlaO0k5xSa65Ck6tDofT/8sadKP9uIyVT6CfXoJjeIqqaf+xm6F3Dtk2/ZhjPIqYjBcbzUdEEKzmVdNdb4ShhVkjM+DzgE2CIK9gIh7opM5joZheNLryhDgJs8DLJJNoHQj9n3konreCK9ZA=
script:
- docker build -t deploy .
after_success:
- docker run -e IFTTT_SERVICE_KEY=${IFTTT_SERVICE_KEY} -e IFTTT_TEST_CLIENT_ID=${IFTTT_TEST_CLIENT_ID}
  -e IFTTT_TEST_CLIENT_SECRET=${IFTTT_TEST_CLIENT_SECRET} -e IFTTT_TEST_USERNAME=${IFTTT_TEST_USERNAME}
  -e IFTTT_TEST_PASSWORD=${IFTTT_TEST_PASSWORD} -e AWS_DEFAULT_REGION=${AWS_DEFAULT_REGION}
  -e AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID} -e AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY}
  deploy
