sudo: required
services:
- docker
env:
  global:
  - secure: fveva554CqFEvTS3yIy1hCjQGkajudY3TZKlEvdYzr+FVQNHgcwAN7rhvOgYsxF+gI+fMM5DOwqY2n1nYfTZPEDLOWTr3izC7/2wkAD2rgYhSqzZnhJH5SgFK1Q63gSPgBCki2aV25zabWtyiKd7NgAgoj9XGXDJ6r7mmzjab5h/27p6/sRMHcGjvx/rToNBeLpPlNwQZW6BsUoFn2BVmYls0OVW4ibppSNDZ7DbTlDOtbdftdd+SPIHI5w01EhQc6nXz2SDh/jpDVWE7EZRClDy4gozIWjoh3DUX+pmbJJKxsuN+QkF7gD4qiVIHEFtxzTtltfNGehzggQxYRdmv50+guUJK2pwwlw0myS6SoG9sxfbAjBUFOQwWbarCEPLf3n+8AUR+DLq15Lz0QuS6hXS/mTL6WLAYVyX+C7glAKGBTF58V/JkUoTJUEuCF1SY0NVxVXAt+7cVDpsJaHT0/YMRLoz3Z+tQKcwvYUwCVOQL202ImtN6yHFg60O6wApDPOrEPT1dUWopn1QeA5TXrSJF7M8WJQ1UgXX/3vVLJJ/YzDWvup9CGFy+GVykFasK7biFnWITL/mZnLscci9vY9+vxF43CXOMOmHOLYl1PlYy3b868CzVOu8LhIaBAl1nw4PeFK3kZuYsj74bk2phmsTy+S+h1L4bwRrntbK664=
  - secure: hjh+ZRd26eiEbHvmxC2hLuo/iiM6pF6a7XMZgxUg92JLicHhotrMcYoghWS0KF6GIRTID3eFF/tUKrigtyJVq2SsMMqtr0A3B1iQnRXgliZkVorWhv03hfU7q42zdwJzIcASp72BpYViXjqvtnRIGwogLVOt5TRMyxyghh9jFVlJp670Ke4Jo2Txvn0T1P58W684Hc1XVn9TKCk5nLkeDU8o2v1p8jWW5cklOHepbC94N6aroO6JPNM5D4osHqcTcuUd94LIlBCcqO3i618941dihmiWj/t3rJe7H8d809ZhT+r/eOnelKYo32jJtDC9wPn+J4ehQS57EBW9JRBWag6s112mcI29D5HvD/qC97byME5clvQ+W4M9w9hPltivmMnu7W1lGDeZm0Va1fMSSIOOC/xRROMmR8t5y/eUo/lZNHRDoZ4NoGGibhvLF4JXc0LUDusy1Krzzi+O8++nnyVYhjWQaeG6XyZlVb+IXpjagXlY36BJIFb77YHFA7sDlVv0lk3oGuMOFFKlPLSwePe4DPBNCbi4h5JEMWhFK2sqcx5cSYpkP+dIRzegjfo2+IX/RXt8L5tuM35Tu0U6J2vZ55s2g9w9EZp2JswEHEK07Twu3lC15/YaUtgoSNYpK1kakpsDv3LHEzKmiPUrvCp2GakH+Bcq05Chhqska38=
  - secure: I/BbsSXtIBtU40M+E/+cfhCcbGtPRknnYK1/Vt32oZyLYe5UUirekJeCMfG38vUrn3KhI/hoExUnpXbzNok6q8gegwFTM90un8D6d9ggTSr1f6GUoXgiL/IS1D592L6KtXBMEO2OmrQjuqrxs4GbItfv1Jc+81T3CzGxxv3mh264Mqr0x6uI+/c3p9LoNFkIcOBsw5Yxyyk+g6fDHqwouSOkcgMNdpIGoTN9iz8NU1DGJ/VuZPDhQ15Jer4BsGTR443q4SLq8oC1r185N2V9QTgwbU3tH6MHEh8+0zRu/KuL+bG0/aqErdRCENXxSu75nOUf5dmZoQ3vBy+gJ+PWmsCz58YxRSGIULlpqkWm3eDPr4AY9FQ7bvzy7XlhlbTD37THlholOPd7KTUPiwHelweO0AAVHE1AjLvgs5A/YWNIu1Jn3C6KERE3fftqnfcle85EgwJxOh/zoY94ftA4Mi4xi6vHNfg6wVgT6uH9G3elGOBqLNcmk4Szld1E/oij1pUSIG8THRH2OmxEqAg0+dQ2XxhS3ctNoReFtaEYIT8HjKxJIKz1JsU3++cORiLtVur8EFjRR5+0Ai6SCq5xVOpj8TnNDzOtglDH9XsuJKsAFrf/qzwx80+6YxvhFqEBGQDAdy/Rckql00gk+KkYy910sBPZTDkSuDa4iU72CnY=
  - secure: uat+FoqI14lVXg75H+Ezz8hT4dEHd3UoFWxeo8ke6JbHn1hnWca2dnkGHVCDr2ZnVDfdCxrz31EJPviEfwSrhWC5YKqD28lPvFEPqI7HghBujLMoCeiyjrnKxyU82dXAupCYcoHWr99rXu6zOhTIstF0u0Pexwy5BHuv2sf6S9FApveP89lVtWinYxbfLvqGh8YSMtKlG7GWUpCD2W2XsC4rqgHYqbTMQgblWvvPusdorlWom5pDR8cwLS39nxDNrzng3/cordp9gTAcwagBdq19BneA8ziESe4OtcvAAiTg+Kf8XQju8mn28fWtzloy3eD5wqA52/BxfObsi3+IWrvCoAwElhQUrEqJqyaalgAaX/0eJsdweHgCJJfQ3XbeQ6jhjFMFWXuECwLW63+brdsmFui1iOFjBXX4szyhOsXtiEQQty95id/EXZbFsy6tKsYcrRpe/6+GphYJaqzvi2z5OXja6mI2GgrCybAjYEGkJKopAaGlcv0EQnaZqt9oyVjLEqka1Kkjyxp/ZnftZbWt6zZibduGUhTqPFDtgiPIfO0aA+iKO1GcfdUwdkKG9G9PIx1K0kDUnw8GU+J4y1bf9aMBBmx1TfcOeg6c42QPoqFlUa4oYOiL28aupP+okx4+EWUxA/0GhYIr0g/sgOU8KzJ1GG0vV/oZbQNBHPw=
  - secure: uRfYZvjvYwiZZtTacASjXeMZT54xxTWtAd6iZNYjgliv2EQ/5ZQCXgvSWURydKgfRTVh+k1PCDlFZaqEarkRXUh6YwsPDq8Vroi/1tYBCr2tpggKvyEUotrwVDQcm7cWQAjZbVqb20oIlYrkA1pAmWkvzEChq1VGGVBAZz/CzSdZNZ2WaP3qKUvR7/R2oMqAjx6DgB8A2iTR7gvW3W5Gw3Vw2rbX83QmHhidarZ4Ib65d5P89Rt+iyx95RZbZHR6LFAz8inBsBPPNBAJoP9MC3oHwUm44Br6GY4ZhNMusOJ3nSXnncmHvT6uHS6uIjSCmOcVGVGNumZa7RymezdP3q6ZJch5RCZ8363bqhZrqvlsmkATagML+bUTzDDcthFCtxksuCYKeu3I/fus3Seb54PtD72ZR1FHd9Hvkaw8lepf1JWzqbNzCifPnnNWXyIl6G1CDpjwBrf5sOJAXx401GwHcJRI7DbufUlW9RwZ2VVJGOX5GHrnz4ciImURW/VpTRIufq+soFsto7MWqV37cPED1cbXG/1XnqzLqcOGEjIdhMryCW5xg8tlPHoGeOF4QwA+PlBPftPaxojOxaGGRTkL7uG5mwRF9hiPpNFGjjhLqbNZIdryDNIanMQ693PAQLvXMeJZY/ZLOBTRqqHN0oc6Gl0U669HEIyXjqIanLM=
  - secure: tDsB8mr4wgMPy6kegI7mX7mI+l1NY4y+eR3aOZflLCv9EZhKdwi9Kfe6MpfTVydo6AK5ujVbILlYe86jSI3eG54SrhDc6RdJrQbOWABkDORp8WPACJXvOWgVMPzVm8auValY3sWrXZC3fuE/mPoMHnXXUaKO2oSUoeTiIfHlKOaxYxfZowl5ZoOQjbAlm00dH6n4c5Rwj4cfJPAmwkSonrwYLA2LTL5ikSKTL5Owf5tbhmdxsQnRFKWkBD4pDfZiUUF4W/O8HySOTVpZ+NWir3QE5TmHJMuzlGncK5MP7wwolcxx0OT9ZySS624g7UhnlYxVGRR3mBd86LzLjBU70QeC5NqDcjxAUyTEBcs+nInoDq4M2qWwKmFhRJfvBbYbOTbYRLAJb0WJrqRPKByvZ0UuCNhPmaLTEfX6KF6XmHzOISx+pmfST80tWbe9PkZTaGj+YEOUhDBouhNTOV3/n++ZtLtu/OkCGFUd8Byt7w8sHWMHPWJTp434W2n+HTJOAqrxugNyeBxLdyGVCEOHTfhE2YBUyYjJkjqAsYpaHMOQY+TX+6KHOlR+qln7BrPO9ontQZcl29WxSD1gAgc+gWdPzu0FMBxnyOG0fLyyKmDlziftSQ95kWaMYH8qMGn7x1+J6dXJZaX/FosX7V/VHt7pRWJDJ57HPUsJSKEztp0=
  - secure: qzLsD6HcJAGXwUczgjXOka2SDVtnwF3gM2oGhjR/ZNi2n9swoMzZdkMaPVlTmnW3cYIw4M1pym1D8giRl7tk4jfATKlbVpbCMEWuBLlvtuXcTXeekQHbrkGpyfp/8LTvhEpWYb82+xkEQHvS8H03z85AWz3i5kSdMPIWqW9DoHZ7u+Zm0e26xbor14RkUnTfL/Yf5brql+tVdlmv1MM/39yUL1d5Sbg6qsyCvRJH2E0I+581c8miaGdpJedomxdcpSb6lbkF//DfJFYQTaaZ3YLSqzS/N/Z8fnklc5qHUGgUNcHHz1FXFlitWdqbirQxDMiwKnr1R8HbsbYKzLPTgUMn9WOWpIU2O+To7XlmgArhCnTu2v4rLcgz44z+rR30RuPVfTB11fbKd5DuXb3RGyBEPAOuKT8T/k9bHKCZHC/RPWYf2GMNUGjGcXgxxZO4Fjn71WyMdHK43DxqLpo5tW8QBRKZ0pqYlYW6IthuP76cngKXwu0CfdI7AIHNa8/c25umgv3OQii4GggQ5am3kbxrbt48ugEwDD22O2eQChnGxYXxyDlzyNV0c3bxCNclz0aYHpSIEf96eG5bqaf4APUE3q+dFuyRWRnDryzHpAYQKExtY1UMXgH7HwwbpnR0SDTTk3oInV9XYqrc2Pn/vukoWhwkLeIrxw7SZY+oW7o=
  - secure: COAIXU16jeIxBomBiBRqLHWNM+DNIgnWdz6xtyF/e9i/qCgCMpMHu2gsFRB4iiLaL4uILEhxJhnR3IX3lV/Dp8Tg9J3r2tH5xwgahisyK9fPPT/bbphlAdaMNmBxYwfUcCCL1Wsh+ePNW8QtdN8mr7AHMQC/LPlgx+NN/c0H1Iuu6RQGe0bFeZZLsFzv/qP2Z477pq2dVWfuSftKDodVVPhXTavdseHjZ3Y2JSz05ecoIkXZ4Y0k24lAjbgLuGkClq3URiULQjJl5q5mB72qsY1E6BFW9I4ZfZfWion4hdp3fVnuUrApG88F215R9AUl+WQ51uXwfYZW7iXtupdz4rbR3BoV4Y0A8nKZdlZ0SVLGZJbLs4pXbhbc7S9uqeNdx7ODCCWUxmkPKD0Qk8uUGMwvF0nu97gpbvrzH6gkka8cDzBPLhOP1qOSIGs0oBH58iD92YGqmmKI4uaqJ+esOdWNH0CYDumr0C4wqYakGrT7D86VISMI8QNiV0xJXphe1CeyGQOT5W4bCyHreW3TAcY/7qk/tVNuQltkqDUWmdftW8jiULV82xPeCvkLQoXWYLefp6xoxrzcMRHS/j88nWWy/XeILFCT1AqaqS7fIOwqx7o6eV8sGhkXEJ7YvwBLQ6Zp2n0bGUrzvJavgtExPDUFpPNhHAuBP0NHMgrNFtE=
script:
- docker build -t deploy .
after_success:
- docker run -e IFTTT_SERVICE_KEY=${IFTTT_SERVICE_KEY} -e IFTTT_TEST_CLIENT_ID=${IFTTT_TEST_CLIENT_ID} -e IFTTT_TEST_CLIENT_SECRET=${IFTTT_TEST_CLIENT_SECRET} -e IFTTT_TEST_USERNAME=${IFTTT_TEST_USERNAME} -e IFTTT_TEST_PASSWORD=${IFTTT_TEST_PASSWORD} -e AWS_DEFAULT_REGION=${AWS_DEFAULT_REGION} -e AWS_ACCESS_KEY_ID=${AWS_ACCESS_KEY_ID} -e AWS_SECRET_ACCESS_KEY=${AWS_SECRET_ACCESS_KEY} deploy